<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tropical System Stats</title>
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet" />
    <script lang="JavaScript">
        function showForm(dowhat) {
            if (dowhat === 'update') {
                document.getElementById('browse').style.display = 'none';
                document.getElementById('insert').style.display = 'none';
                document.getElementById('update').style.display = 'block';
            } else if (dowhat === 'insert') {
                document.getElementById('browse').style.display = 'none';
                document.getElementById('insert').style.display = 'block';
                document.getElementById('update').style.display = 'none';
            } else {
                document.getElementById('browse').style.display = 'block';
                document.getElementById('insert').style.display = 'none';
                document.getElementById('update').style.display = 'none';
            }
        }

        function addStats() { showForm('insert'); }
        function updateStats(stat_id, season_id, system_id, min_pressure, max_wind_speed, max_rainfall, max_storm_surge, death_count, injury_count, total_cost) {
            document.getElementById('update_stat_id').value = stat_id;
            document.getElementById('update_season_id').value = season_id;
            document.getElementById('update_system_id').value = system_id;
            document.getElementById('update_min_pressure').value = min_pressure;
            document.getElementById('update_max_wind_speed').value = max_wind_speed;
            document.getElementById('update_max_rainfall').value = max_rainfall;
            document.getElementById('update_max_storm_surge').value = max_storm_surge;
            document.getElementById('update_death_count').value = death_count;
            document.getElementById('update_injury_count').value = injury_count;
            document.getElementById('update_total_cost').value = total_cost;
            showForm('update');
        }
    </script>
</head>
<body onload="showForm('browse')">
    <h1>Tropical System Stats</h1>
    <nav>
        <a href="{{ url_for('index') }}">Home</a> |
        <a href="{{ url_for('tropical_systems') }}">Tropical Storms</a> |
        <a href="{{ url_for('impacts') }}">Impacts</a> |
        <a href="{{ url_for('tropical_system_impacts') }}">Tropical System Impacts</a> |
        <a href="{{ url_for('tropical_system_stats') }}">Tropical System Stats</a>
    </nav>

    <h3>View tropical system stats for a given season</h3>
    <div id="browse">
        <form method="post" action="{{ url_for('tropical_system_stats') }}">
            <fieldset>
                <label>Season:</label>
                <select name="seasonSelect">
                    {% for HurricaneSeasons in HurricaneSeasons %}
                    <option value="{{ HurricaneSeasons.season_id }}">{{ HurricaneSeasons.season_id }}</option>
                    {% endfor %}
                </select>
                <input type="submit" value="Browse Stats">
            </fieldset>
        </form>

        <h2>Stats for Selected Season</h2>
        <table border="1" cellpadding="5">
            <tr>
                <th>Stat ID</th>
                <th>Season ID</th>
                <th>System ID</th>
                <th>Min Pressure</th>
                <th>Max Wind Speed</th>
                <th>Max Rainfall</th>
                <th>Max Storm Surge</th>
                <th>Death Count</th>
                <th>Injury Count</th>
                <th>Total Cost</th>
                <th>Actions</th>
            </tr>
            {% for TropicalSystemStats in TropicalSystemStats %}
            <tr>
                <td>{{ TropicalSystemStats.stat_id }}</td>
                <td>{{ TropicalSystemStats.season_id }}</td>
                <td>{{ TropicalSystemStats.system_id }}</td>
                <td>{{ TropicalSystemStats.min_pressure }}</td>
                <td>{{ TropicalSystemStats.max_wind_speed }}</td>
                <td>{{ TropicalSystemStats.max_rainfall }}</td>
                <td>{{ TropicalSystemStats.max_storm_surge }}</td>
                <td>{{ TropicalSystemStats.death_count }}</td>
                <td>{{ TropicalSystemStats.injury_count }}</td>
                <td>{{ TropicalSystemStats.total_cost }}</td>
                <td>
                    <a href="#" 
                        onclick="updateStats(
                            '{{ TropicalSystemStats.stat_id }}', 
                            '{{ TropicalSystemStats.season_id }}', 
                            '{{ TropicalSystemStats.system_id }}', 
                            '{{ TropicalSystemStats.min_pressure }}', 
                            '{{ TropicalSystemStats.max_wind_speed }}', 
                            '{{ TropicalSystemStats.max_rainfall }}', 
                            '{{ TropicalSystemStats.max_storm_surge }}', 
                            '{{ TropicalSystemStats.death_count }}', 
                            '{{ TropicalSystemStats.injury_count }}', 
                            '{{ TropicalSystemStats.total_cost }}'
                        )">
                        Edit
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>

    <!-- Insert Form -->
    <div id="insert" style="display: none;">
        <form method="post" action="{{ url_for('add_tropical_system_stat') }}">
            <fieldset>
                <label>Season ID:</label> <input type="text" name="season_id">
                <label>System ID:</label> <input type="text" name="system_id">
                <label>Min Pressure:</label> <input type="text" name="min_pressure">
                <label>Max Wind Speed:</label> <input type="text" name="max_wind_speed">
                <label>Max Rainfall:</label> <input type="text" name="max_rainfall">
                <label>Max Storm Surge:</label> <input type="text" name="max_storm_surge">
                <label>Death Count:</label> <input type="text" name="death_count">
                <label>Injury Count:</label> <input type="text" name="injury_count">
                <label>Total Cost:</label> <input type="text" name="total_cost">
            </fieldset>
            <input type="submit" value="Add Stat">
            <input type="button" value="Cancel" onclick="showForm('browse')">
        </form>
    </div>

    <!-- Update Form -->
    <div id="update" style="display: none;">
        <form method="post" action="{{ url_for('update_tropical_system_stat') }}">
            <fieldset>
                <input type="hidden" name="stat_id" id="update_stat_id">
                <label>Season ID:</label> <input type="text" name="season_id" id="update_season_id">
                <label>System ID:</label> <input type="text" name="system_id" id="update_system_id">
                <label>Min Pressure:</label> <input type="text" name="min_pressure" id="update_min_pressure">
                <label>Max Wind Speed:</label> <input type="text" name="max_wind_speed" id="update_max_wind_speed">
                <label>Max Rainfall:</label> <input type="text" name="max_rainfall" id="update_max_rainfall">
                <label>Max Storm Surge:</label> <input type="text" name="max_storm_surge" id="update_max_storm_surge">
                <label>Death Count:</label> <input type="text" name="death_count" id="update_death_count">
                <label>Injury Count:</label> <input type="text" name="injury_count" id="update_injury_count">
                <label>Total Cost:</label> <input type="text" name="total_cost" id="update_total_cost">
            </fieldset>
            <input type="submit" value="Update Stat">
            <input type="button" value="Cancel" onclick="showForm('browse')">
        </form>
    </div>
</body>
</html>
